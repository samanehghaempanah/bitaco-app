<!-- New Print Order -->
<div *ngIf="pageData.formType==='new'">
    <h2 class="content-block">ثبت سفارش بسته بندی و چاپ</h2>
    <div id="scrolledtabs" class="dx-card wide-card mx-4">
        <dx-tabs [dataSource]="tabs" [scrollByContent]="true" [showNavButtons]="true" (onItemClick)="selectTab($event)"
            [selectedItem]="tabs[0]" selectionMode="single"></dx-tabs>
        <div *ngIf="tabContent==='tab1'">
            <div class="content-block">
                <div class="responsive-paddings">
                    <!-- <div class="lable-box">
                        مشخصات محصول
                    </div>
                    <hr> -->
                    <div class="d-flex flex-column flex-md-column">
                        <div class="d-flex column-gap my-3">
                            <dx-text-box class="my-2" name="orderId" label="شناسه سفارش" labelMode="floating"
                                [readOnly]="true" value="100010">
                            </dx-text-box>
                            <dx-date-box type="date" name="orderDate" label="تاریخ سفارش" labelMode="floating">
                            </dx-date-box>
                            <dx-number-box class="my-2" name="invoiceNumber" [step]="1" [min]="0" [max]="1000"
                                label="شماره پیش فاکتور" labelMode="floating" [showSpinButtons]="true">
                            </dx-number-box>
                        </div>
                        <div class="d-flex items-center column-gap my-3">
                            <dx-check-box class="my-2" text="N/O" width="200px">
                            </dx-check-box>
                            <dx-check-box class="my-2" text="صادراتی" width="200px">
                            </dx-check-box>
                            <dx-check-box class="my-2" text="فاکتور باز" width="200px">
                            </dx-check-box>
                            <dx-check-box class="my-2" text="بازسازی سیلندر" width="200px">
                            </dx-check-box>
                            <dx-check-box class="my-2" text="نمونه" width="200px">
                            </dx-check-box>
                            <dx-check-box class="my-2" text="تست" width="200px">
                            </dx-check-box>
                        </div>
                        <div class="d-flex items-center column-gap my-3">
                            <dx-check-box class="my-2" text="تولید فیلم" width="200px">
                            </dx-check-box>
                            <dx-check-box class="my-2" text="چاپ و بسته بندی" width="200px">
                            </dx-check-box>
                            <dx-check-box class="my-2" text="مواد اولیه" width="200px">
                            </dx-check-box>
                        </div>
                        <div class="d-flex column-gap my-3">
                            <dx-text-box class="my-2" name="customerId" label="شناسه مشتری" labelMode="floating">
                            </dx-text-box>
                            <div class="order-md-2 d-flex items-center">
                                <dx-number-box class="my-2" name="deliveryTime" [step]="1" [min]="0" [max]="1000"
                                    label="مدت تحویل" labelMode="floating" [showSpinButtons]="true">
                                </dx-number-box>
                                <span class="me-3">روز</span>
                            </div>
                            <dx-date-box type="date" name="deliveryDate" label="تاریخ تحویل" labelMode="floating">
                            </dx-date-box>
                            <dx-select-box placeholder="" class="my-2" [dataSource]="pageData.delivery" valueExpr="text"
                                displayExpr="text" label="تحویل" name="delivery" labelMode="floating">
                            </dx-select-box>
                        </div>
                        <div class="d-flex column-gap my-3">
                            <dx-select-box placeholder="" class="w-50 my-2" [dataSource]="pageData.deliveryConditions"
                                valueExpr="id" displayExpr="text" label="شرایط تحویل" name="deliveryConditions"
                                labelMode="floating">
                            </dx-select-box>
                            <dx-select-box placeholder="" class="w-50 my-2" [dataSource]="pageData.peymentConditions"
                                valueExpr="id" displayExpr="text" label="شرایط پرداخت" name="peymentConditions"
                                labelMode="floating">
                            </dx-select-box>
                        </div>
                        <div class="d-flex column-gap my-3">
                            <dx-number-box class="my-2" name="prePaymentPercent" format="#,##0.00" [step]="1" [min]="0"
                                [max]="1000" label="درصد پیش پرداخت" labelMode="floating" [showSpinButtons]="true">
                            </dx-number-box>
                            <dx-text-box class="my-2" name="tax" label="ارزش افزوده" labelMode="floating"
                                [readOnly]="true" value="9%">
                            </dx-text-box>
                        </div>
                    </div>
                    <div class="d-flex flex-column w-75">
                        <dx-text-area class="my-3" name="productionDescription" [maxLength]="500" label="توضیحات تولید"
                            labelMode="floating" [minHeight]="50" [maxHeight]="300" [autoResizeEnabled]="true"
                            height="100px">
                        </dx-text-area>
                        <dx-text-area class="my-3" name="financeDescription" [maxLength]="500" label="توضیحات مالی"
                            labelMode="floating" [minHeight]="50" [maxHeight]="300" [autoResizeEnabled]="true"
                            height="100px">
                        </dx-text-area>
                    </div>
                    <div class="d-flex items-center column-gap my-3">
                        <dx-check-box class="my-2" text="شروع تولید با هماهنگی فروش" width="200px">
                        </dx-check-box>
                        <dx-check-box class="my-2" text="وزن به صورت کاملا خالص" width="200px">
                        </dx-check-box>
                        <dx-check-box class="my-2" text="نیاز به تاییدیه مجدد دارد" width="200px">
                        </dx-check-box>
                        <dx-check-box class="my-2" text="تاییدیه چاپ با هماهنگی فروش" width="200px">
                        </dx-check-box>
                        <dx-check-box class="my-2" text="نمونه قبلی دارد" width="200px">
                        </dx-check-box>
                        <dx-check-box class="my-2" text="فوری" width="200px">
                        </dx-check-box>
                    </div>
                    <div class="d-flex items-center column-gap my-3">
                        <dx-text-box class="my-2" name="orderId" label="ثبت کننده" labelMode="floating"
                            [readOnly]="true" value="میلاد مشرقی">
                        </dx-text-box>
                    </div>
                </div>
                <!-- <div class="dx-card responsive-paddings">
                    <div class="lable-box">
                        مشخصات تحویل گیرنده
                    </div>
                    <hr>
                    <div class="d-flex flex-column w-75 w-md-100 m-auto">
                        <dx-select-box [dataSource]="address" valueExpr="id" displayExpr="name" class="my-2" name="address"
                            label="محل تحویل" labelMode="floating" placeholder="">
                        </dx-select-box>
                        <div class="d-flex flex-column my-3">
                            <dx-text-area class="my-2" name="description" [maxLength]="500" label="توضیحات" labelMode="floating"
                                [minHeight]="50" [maxHeight]="300" [autoResizeEnabled]="true" height="100px">
                            </dx-text-area>
                        </div>
                    </div>
                </div> -->
                <div class="d-flex justify-center my-4">
                    <dx-button type="default" text="ثبت سفارش جدید" (onClick)="onSubmitOrder()">
                    </dx-button>
                </div>
            </div>
        </div>
        <div *ngIf="tabContent==='tab2'" class="d-flex flex-column justify-center my-4">
            <dx-data-grid [dataSource]="documents" [customizeColumns]="customizeDocumentColumns"
                [hoverStateEnabled]="true" [(selectedRowKeys)]="gridBoxDocumentValue" height="100%"
                noDataText=".داده ای وجود ندارد" dataRowTemplate="dataRowTemplateName">
                <ng-container *dxTemplate="let document of 'dataRowTemplateName'">
                    <tr class="designsData text-center">
                        <td>{{document.data.id}}</td>
                        <td>{{document.data.type}}</td>
                        <td>{{document.data.name}}</td>
                        <!-- <td>{{document.data.path}}</td> -->
                        <td>{{document.data.description}}</td>
                        <td class="text-center">
                            <img *ngIf="document.data.suffix?.length>0"
                                [src]="'/assets/images/file-type/'+document.data.suffix+'.png'" class="fileTypeImage" />
                        </td>
                        <td>{{document.data.date}}</td>
                        <td class="text-center">
                            <dx-button icon="{{document.data.edit}}" text="" class="text-warning"
                                (onClick)="onEditDocFile(document.data)">
                            </dx-button>
                        </td>
                        <td class="text-center">
                            <dx-button icon="{{document.data.delete}}" text="" class="text-danger"
                                (onClick)="onDeleteDocFile(document.data)">
                            </dx-button>
                        </td>
                        <td class="text-center">
                            <dx-button icon="{{document.data.view}}" text="" class="text-info"
                                (onClick)="onViewDocFile(document.data)">
                            </dx-button>
                        </td>
                        <td class="text-center">
                            <a href="{{document.data.path}}" download>
                                <dx-button icon="{{document.data.download}}" text="" class="text-success">
                                </dx-button>
                            </a>
                        </td>
                    </tr>
                </ng-container>
                <dxo-selection mode="single"></dxo-selection>
                <!-- <dxo-filter-row [visible]="true"></dxo-filter-row> -->
                <!-- <dxo-header-filter [visible]="true"></dxo-header-filter> -->
                <dxo-scrolling mode="virtual"></dxo-scrolling>
                <dxo-paging [enabled]="true" [pageSize]="10"></dxo-paging>
            </dx-data-grid>
            <div>
                <dx-button text="آپلود فایل جدید" icon="add" type="default" (onClick)="showNewDocForm($event)"
                    class="m-3"></dx-button>
            </div>
        </div>
        <dx-popup [width]="400" [height]="600" [hideOnOutsideClick]="false" [showCloseButton]="true"
            [(visible)]="pageData.NewDocFormVisible" title="مشخصات فایل جدید">
            <div *dxTemplate="let data of 'content'">
                <dx-scroll-view width="100%" height="100%">
                    <div class="content">
                        <dx-select-box placeholder="" class="my-2" [dataSource]="docFileModel" valueExpr="text"
                            displayExpr="text" label="نوع فایل" name="docType" labelMode="floating"
                            [(value)]="newDocFormData.type">
                        </dx-select-box>
                        <dx-text-area class="my-2" name="docFileDescription" [maxLength]="500" label="توضیحات"
                            labelMode="floating" [minHeight]="50" [maxHeight]="300" [autoResizeEnabled]="true"
                            height="100px" [(value)]="newDocFormData.description">
                        </dx-text-area>
                        <dx-file-uploader (onValueChanged)="newDocFilesUploaded($event)"
                            [value]="newDocFormData.fileData" [allowedFileExtensions]="docFileExtention"
                            [allowCanceling]="true" selectButtonText="بارگزاری فایل جدید"
                            labelText="یا فایل را در این قسمت بکشید...">
                        </dx-file-uploader>
                        <div *ngIf="newDocFormData.fileData.length>0" class="text-center my-4">
                            <img [src]="newDocFormData.path" style="width: 200px;" />
                        </div>
                    </div>
                </dx-scroll-view>
            </div>
            <dxi-toolbar-item widget="dxButton" toolbar="bottom" location="center"
                [options]="pageData.NewDocFormButtonOptions">
            </dxi-toolbar-item>
        </dx-popup>
        <dx-popup [width]="400" [height]="600" [hideOnOutsideClick]="false" [showCloseButton]="true"
            [(visible)]="pageData.EditDocFormVisible" title="ویرایش مشخصات فایل">
            <div *dxTemplate="let data of 'content'">
                <dx-scroll-view width="100%" height="100%">
                    <div class="content">
                        <dx-select-box placeholder="" class="my-2" [dataSource]="docFileModel" valueExpr="text"
                            displayExpr="text" label="نوع فایل" name="docType" [(value)]="editDocFormData.type"
                            labelMode="floating">
                        </dx-select-box>
                        <dx-text-area class="my-2" name="docFileDescription" [maxLength]="500" label="توضیحات"
                            labelMode="floating" [minHeight]="50" [maxHeight]="300" [autoResizeEnabled]="true"
                            height="100px" [(value)]="editDocFormData.description">
                        </dx-text-area>
                        <dx-file-uploader (onValueChanged)="editDocFilesUploaded($event)"
                            [allowedFileExtensions]="docFileExtention" [allowCanceling]="true"
                            selectButtonText="جایگزین کردن فایل جدید" labelText="یا فایل را در این قسمت بکشید...">
                        </dx-file-uploader>
                        <div class="text-center my-4">
                            <img [src]="editDocFormData.path" style="width: 200px;" />
                        </div>
                    </div>
                </dx-scroll-view>
            </div>
            <dxi-toolbar-item widget="dxButton" toolbar="bottom" location="center"
                [options]="pageData.EditDocFormButtonOptions">
            </dxi-toolbar-item>
        </dx-popup>
        <dx-popup [width]="600" height="auto" maxHeight="90%" [hideOnOutsideClick]="true" [showCloseButton]="true"
            [(visible)]="pageData.ViewDocFormVisible">
            <div *dxTemplate="let data of 'content'">
                <dx-scroll-view width="100%" height="100%">
                    <div class="content">
                        <div class="text-center">
                            <img [src]="viewDocFile" class="w-100" />
                        </div>
                    </div>
                </dx-scroll-view>
            </div>
        </dx-popup>
    </div>
</div>

<!-- My Print Orders -->
<div *ngIf="pageData.formType==='list'">
    <h2 class="content-block">سفارشات بسته بندی و چاپ من</h2>
    <div class="dx-card wide-card mx-4">
        <div class="d-flex flex-column justify-center my-4">
            <dx-data-grid [dataSource]="pageData.orders" [customizeColumns]="customizeOrdersColumns"
                [hoverStateEnabled]="true" [(selectedRowKeys)]="pageData.gridBoxValue" height="100%"
                noDataText=".داده ای وجود ندارد" dataRowTemplate="dataRowTemplateName">
                <ng-container *dxTemplate="let order of 'dataRowTemplateName'">
                    <tr class="productsData text-center">
                        <td>{{order.data.id}}</td>
                        <td>{{order.data.row}}</td>
                        <td>{{order.data.productId}}</td>
                        <td>{{order.data.productName}}</td>
                        <td>
                            <dx-button [icon]="order.data.helioPrint ? 'check' : 'close'"
                                [class]="order.data.helioPrint ? 'text-success' : 'text-danger'">
                            </dx-button>
                        </td>
                        <td>
                            <dx-button [icon]="order.data.felexoPrint ? 'check' : 'close'"
                                [class]="order.data.felexoPrint ? 'text-success' : 'text-danger'">
                            </dx-button>
                        </td>
                        <td>
                            <dx-button [icon]="order.data.laminate ? 'check' : 'close'"
                                [class]="order.data.laminate ? 'text-success' : 'text-danger'">
                            </dx-button>
                        </td>
                        <td>
                            <dx-button [icon]="order.data.cutting ? 'check' : 'close'"
                                [class]="order.data.cutting ? 'text-success' : 'text-danger'">
                            </dx-button>
                        </td>
                        <td>
                            <dx-button [icon]="order.data.coldCeil ? 'check' : 'close'"
                                [class]="order.data.coldCeil ? 'text-success' : 'text-danger'">
                            </dx-button>
                        </td>
                        <td>
                            <dx-button [icon]="order.data.packeting ? 'check' : 'close'"
                                [class]="order.data.packeting ? 'text-success' : 'text-danger'">
                            </dx-button>
                        </td>
                        <td>
                            <dx-button [icon]="order.data.centerCeil ? 'check' : 'close'"
                                [class]="order.data.centerCeil ? 'text-success' : 'text-danger'">
                            </dx-button>
                        </td>
                        <td>
                            <dx-button [icon]="order.data.makingCylinder ? 'check' : 'close'"
                                [class]="order.data.makingCylinder ? 'text-success' : 'text-danger'">
                            </dx-button>
                        </td>
                        <td>
                            <dx-button [icon]="order.data.punch ? 'check' : 'close'"
                                [class]="order.data.punch ? 'text-success' : 'text-danger'">
                            </dx-button>
                        </td>
                        <td>
                            <dx-button [icon]="order.data.cut ? 'check' : 'close'"
                                [class]="order.data.cut ? 'text-success' : 'text-danger'">
                            </dx-button>
                        </td>
                        <td>
                            <dx-button [icon]="order.data.rollToRoll ? 'check' : 'close'"
                                [class]="order.data.rollToRoll ? 'text-success' : 'text-danger'">
                            </dx-button>
                        </td>
                        <td>
                            <dx-button [icon]="order.data.threatment ? 'check' : 'close'"
                                [class]="order.data.threatment ? 'text-success' : 'text-danger'">
                            </dx-button>
                        </td>
                        <td>{{order.data.couting}}</td>
                        <td>{{order.data.amount}}</td>
                        <td>{{order.data.unit}}</td>
                        <td>{{order.data.price}}</td>
                        <td>{{order.data.currency}}</td>
                        <td>{{order.data.exchangeRate}}</td>
                        <td>{{order.data.design}}</td>
                        <td>{{order.data.cylinder}}</td>
                        <td>{{order.data.layer1}}</td>
                        <td>{{order.data.layer2}}</td>
                        <td>{{order.data.layer3}}</td>
                        <td>{{order.data.layer4}}</td>
                        <td>{{order.data.description}}</td>
                    </tr>
                </ng-container>
                <dxo-scrolling columnRenderingMode="virtual"></dxo-scrolling>
                <dxo-selection mode="single"></dxo-selection>
                <dxo-filter-row [visible]="true"></dxo-filter-row>
                <!-- <dxo-header-filter [visible]="true"></dxo-header-filter> -->
                <dxo-scrolling mode="virtual"></dxo-scrolling>
                <dxo-paging [enabled]="true" [pageSize]="10"></dxo-paging>
            </dx-data-grid>
        </div>
    </div>
    <!-- <div class="selected-data">
            <span class="caption">Selected Records:</span>
            <span>
                {{
                grid.selectedRowKeys.length
                ? (grid.instance.getSelectedRowsData())
                : "Nobody has been selected"
                }}
            </span>
        </div> -->
    <!-- <div class="d-flex justify-center my-4">
        <dx-button type="default" text="ثبت سفارش جدید" [disabled]="!isRowsSelected" (onClick)="onSubmitNewOrder()">
        </dx-button>
    </div>
    <div class="d-flex justify-center my-4">
        <dx-button type="default" text="تکرار سفارش">
        </dx-button>
    </div> -->
</div>